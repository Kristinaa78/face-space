<div class="container col-12 d-flex flex-row">
  <div class="col-9 video-content">
    <div #webcamGrid class="webcam-grid">
      <video #videoPlayer [ngStyle]="{ 'width.px': size }" controls></video>
      <!-- <video [srcObject]="stream" [ngStyle]="{'width.px': size }" controls></video>
      <video [srcObject]="stream" [ngStyle]="{'width.px': size }" controls></video>
      <video  [srcObject]="stream" [ngStyle]="{'width.px': size }" controls></video>
      <video  [srcObject]="stream" [ngStyle]="{'width.px': size }" controls></video>
      <video [srcObject]="stream" [ngStyle]="{'width.px': size }" controls></video>
  -->

      <!-- <div *ngFor="let video of videos">
        <video
          width="100%"
          height="150"
          [srcObject]="video.stream"
          (loadedmetadata)="onLoadedMetadata($event)"
        ></video>
      </div>
      <div style="position: relative" [hidden]="!screenSharing">
        <video
          [srcObject]="shareScreenStream"
          (loadedmetadata)="onLoadedMetadata($event)"
          muted
        ></video>
      </div> -->
    </div>

    <div class="button-group">
      <!-- <button (click)="callThem()">Join/Connect to other users</button> -->

      <button
        pButton
        pRipple
        class="p-button-warning mx-0 my-0"
        (click)="shareScreen()"
        style="
          border-radius: 0px;
          border-bottom-left-radius: 5px;
          border-top-left-radius: 5px;
        "
      >
        <i class="fa-solid fa-desktop" style="margin-right: 10px"></i> Share
        screen
      </button>

      <button
        *ngIf="!recording"
        pButton
        pRipple
        style="border-radius: 0px"
        class="p-button-success mx-0 my-0"
        (click)="startRecording()"
      >
        <i class="fa-solid fa-record-vinyl" style="margin-right: 10px"></i>
        Start recording
      </button>

      <button
        *ngIf="recording"
        pButton
        pRipple
        class="p-button-primary mx-0 my-0"
        style="border-radius: 0px"
        (click)="stopRecording(); recording = false"
      >
        <i class="fa-solid fa-stop" style="margin-right: 10px"></i>
        Stop recording
      </button>

      <button
        pButton
        pRipple
        style="
          border-radius: 0px;
          border-bottom-right-radius: 5px;
          border-top-right-radius: 5px;
        "
        class="p-button-help mx-0 my-0"
        (click)="muteVideo()"
      >
        <i class="fa-solid fa-video-slash" style="margin-right: 10px"></i> Turn
        camera off
      </button>
    </div>
  </div>

  <div
    class="col-3 chat"
    style="display: flex; flex-direction: column; align-content: space-between"
  >
    <div>
      <div>
        <div class="d-flex justify-content-center">
          <h5 class="chat-header">ROOM CHAT</h5>
        </div>

        <div class="chat-content" id="chat">
          <div class="" *ngFor="let i of conferenceHubService.messages">
            <div class="d-flex flex-row justify-content-between">
              <span class="message-header"> {{ i.senderUsername }}: </span>
              <span class="message-header">
                {{ i.messageSent | date : "HH:MM:ss" }}
              </span>
            </div>
            <div class="chat-message">
              <span class="message-content">
                {{ i.content }}
              </span>
            </div>
          </div>
        </div>
      </div>

      <div class="p-inputgroup chat-input px-3">
        <input type="text" pInputText [(ngModel)]="newMessage" />
        <span class="p-inputgroup-addon py-0 px-0"
          ><button
            pButton
            pRipple
            style="
              height: 99% !important;
              border-bottom-left-radius: 0px;
              border-top-left-radius: 0px;
            "
            [disabled]="newMessage.length == 0"
            class="create-button p-button-warning mx-0 my-0"
            (click)="sendMessage()"
          >
            <i class="fa-solid fa-paper-plane"></i></button
        ></span>
      </div>
    </div>
  </div>
</div>
