<div class="container col-12 d-flex flex-row">
  <div class="col-9 webcam-grid">
    <div class="room-header d-flex justify-content-center">
      <h5>{{ room?.roomName }}</h5>
    </div>
    <button (click)="callThem()">Join/Connect to other users</button>
    <button (click)="shareScreen()">Share screen</button>
    <button (click)="startRecording()" [hidden]="recording">
      ðŸ”´ Start recording
    </button>
    <button (click)="stopRecording()" [hidden]="!recording">
      ðŸ”² Stop recording
    </button>
    <button (click)="muteVideo()">muteVideo</button>
    <br />
    <video #videoPlayer width="100%" height="170" controls></video>
    <div *ngFor="let video of videos">
      <video
        width="100%"
        height="150"
        [srcObject]="video.stream"
        (loadedmetadata)="onLoadedMetadata($event)"
      ></video>
    </div>
    <div style="position: relative" [hidden]="!screenSharing">
      <video
        [srcObject]="shareScreenStream"
        (loadedmetadata)="onLoadedMetadata($event)"
        muted
      ></video>
    </div>
  </div>

  <div class="col-3 chat" style="display: flex; flex-direction:  column; align-content: space-between;">
    <div >
      <div>

        <div class="d-flex justify-content-center">
          <h5 class="chat-header">ROOM CHAT</h5>
        </div>
  
        <div class="chat-content" id="chat">
          <div class="" *ngFor="let i of conferenceHubService.messages">
            <div class="d-flex flex-row justify-content-between">
              <span class="message-header"> {{ i.senderUsername }}: </span>
              <span class="message-header">
                {{ i.messageSent | date : "HH:MM:ss" }}
              </span>
            </div>
            <div class="chat-message">
              <span class="message-content">
                {{ i.content }}
              </span>
  
              <span class="message-timestamp">
                {{ i.messageSent | date : "HH:MM:ss" }}
              </span>
            </div>
          </div>
        </div>
      </div>
    
      <div class="p-inputgroup chat-input px-3">
        <input type="text" pInputText [(ngModel)]="newMessage" />
        <span class="p-inputgroup-addon py-0 px-0"
          ><button
            pButton
            pRipple
            style="
              height: 99% !important;
              border-bottom-left-radius: 0px;
              border-top-left-radius: 0px;
            "
            class="create-button p-button-warning mx-0 my-0"
            (click)="sendMessage()"
          >
            <i class="fa-solid fa-paper-plane"></i></button
        ></span>
      </div>
    </div>
  </div>
</div>
